<!DOCTYPE html>
<html lang="fr">


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tower of Babel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="styles.css" />


    <script type="text/javascript" src="phaser.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <script type="text/javascript" src="./src/util/util.js"></script>
    <script type="text/javascript" src="./src/util/userInfo.js"></script>

    <script type="text/javascript" src="./src/pages/accueil.js"></script>

    <script type="text/javascript" src="./src/pages/exploration/gameover.js"></script>
    <script type="text/javascript" src="./src/pages/exploration/couloir.js"></script>
    <script type="text/javascript" src="./src/pages/exploration/escalier.js"></script>
    <script type="text/javascript" src="./src/pages/exploration/salle.js"></script>

    <script type="text/javascript" src="./src/pages/hameau/hameau.js"></script>
    <script type="text/javascript" src="./src/pages/hameau/forge.js"></script>
    <script type="text/javascript" src="./src/pages/hameau/laboratoire.js"></script>
    <script type="text/javascript" src="./src/pages/hameau/diligence.js"></script>
    <script type="text/javascript" src="./src/pages/hameau/composerEquipe.js"></script>
    <script type="text/javascript" src="./src/util/classBarreInfo.js"></script>

    <script type="text/javascript" src="./src/fight/class/fighterBluePrint.js"></script>
    <script type="text/javascript" src="./src/fight/class/HeroFactory.js"></script>

   <script type="text/javascript" src="./src/fight/Arbiter.js"></script>
   <script type="text/javascript" src="./src/fight/LoadingFight.js"></script>
   <script type="text/javascript" src="./src/fight/Fight.js"></script>



    <script type="text/javascript" src="./src/util/graphicManager.js"></script>
    <script type="text/javascript" src="./src/fight/DamageText.js"></script>
    <script type="text/javascript" src="./src/fight/HealthBar.js"></script>

    <script type="text/javascript" src="game.js"></script>

<body>
    <nav class="navbar bg-dark border-bottom border-body z-index-top" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand">Tower of Babel</a>
            <div class="d-flex">
                <div id="loginBtn">
                    <a class="btn btn-outline-warning btn-login" href="./src/login/login.html">
                        Connexion
                    </a>
                </div>
                <div class="px-3" style="font-size: 20px;">
                    <p id="context"></p>
                </div>
                <div id="userId" style="display: none">
                    <button onclick="viewUserInfo(user.userId)" style="background-color: transparent; border: 0">
                        <svg t="1704704973689" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="9536" width="35" height="35">
                            <path
                                d="M512 545.152c229.76 0 416 126.848 416 270.848 0 130.304-152.448 142.72-351.68 143.872h-128.64C248.448 958.72 96 946.304 96 816c0-144 186.24-270.848 416-270.848z m0 96c-180.16 0-320 92.352-320 174.848 0 30.688 56.192 46.304 272.32 47.872L512 864l49.6-0.192c215.552-1.92 270.4-17.12 270.4-47.808 0-82.496-139.84-174.848-320-174.848zM512 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448z m0 96a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"
                                fill="#ffffff" p-id="9537"></path>
                        </svg>
                    </button>
                    <button onclick="logout()" style="background-color: transparent; border: 0">
                        <svg t="1704705059347" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="10811" width="35" height="35">
                            <path
                                d="M136.2 513.8v366.7c0 26.4 23.4 47.8 52.4 47.8h261.8c28.9 0 52.4-21.4 52.4-47.8s-23.4-47.8-52.4-47.8H241V194.8h209.5c28.9 0 52.4-21.4 52.4-47.8s-23.4-47.8-52.4-47.8H188.6c-28.9 0-52.4 21.4-52.4 47.8v366.8z m757.5-34.6c10.1 8.8 16.4 21.5 16.4 35.6 0 14.2-6.3 26.8-16.4 35.6L728.3 693.8c-8.8 7.6-20.5 12.3-33.2 12.3-27.4 0-49.6-21.5-49.6-47.9 0-14.1 6.4-26.8 16.5-35.5l69.3-60.1h-301c-27.4 0-49.6-21.4-49.6-47.8s22.2-47.8 49.6-47.8h300.8l-69.3-60.1c-10.1-8.7-16.5-21.5-16.5-35.6 0-26.4 22.3-47.8 49.6-47.8 12.8 0 24.4 4.6 33.2 12.3l165.6 143.4z"
                                fill="#ffffff" p-id="10812"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="wrapper">
        <div class="content">
            <div id="game-container"></div>
            <div class="card text-bg-dark mb-3 border-light card-presentation">
                <h5 class="card-header">Tower of Babel</h5>
                <div class="card-body border-light">
                    <p class="card-text">
                        Tower of Babel est un jeu d'exploration et de combat au tour par tour.
                        Le joueur doit explorer une tour, composée d'étages, eux même composés
                        de salles et de couloirs. Le joueur pourra trouver du butin et
                        rencontrer des ennemis dans ces derniers. L'objectif est d'atteindre
                        le niveau le plus haut possible d'une tour infinie. Cette tour
                        mystérieuse semble se reconstruire à chaque exploration, rendant
                        chaque expédition unique, et est parsemée d'embuches de plus en plus
                        dangereuses.
                    </p>
                    <p class="card-text">
                        Ce projet se déroule dans le cadre d'un projet universitaire.
                    </p>
                </div>

            </div>
        </div>
        <footer class="footer" style="margin-top: 1300px;">
            <div style="margin-bottom: 20px;">
                <img src="assets/images/iut-logo.png" />
                <p style="float: right;">NOBILI Lothaire | SAHININE Haroun | WANG Nuoxi</p>
            </div>
            <div style="margin: 10px 20px;">
                <ul>
                    <li>Librairie et Cadre Open Source: </li>
                    <a href="https://getbootstrap.com/">https://getbootstrap.com/</a><br>
                    <a href="https://jquery.com/">https://jquery.com/</a><br>
                    <a href="https://phaser.io/">https://phaser.io/</a><br>
                    <li>Référence Technique: </li>
                    <a href="https://www.darkestdungeon.com/">Darkest Dungeon® Red Hook Studios</a><br>
                    <a href="https://stackoverflow.com/">https://stackoverflow.com/</a><br>
                    <a href="https://openai.com/blog/chatgpt">Chatgpt</a>
                    <li>Source des Images: </li>
                    <a href="https://game-icons.net/">https://game-icons.net/</a><br>
                    <a href="https://www.iconfont.cn/?lang=en-us">https://www.iconfont.cn/?lang=en-us</a><br>
                    <a href="https://www.bing.com/images">https://www.bing.com/images</a><br>
                </ul>
            </div>
        </footer>
    </div>
    <script type="text/javascript">
        var storedUserData = localStorage.getItem("userData");
        let logoutBtn = document.getElementById("logoutBtn");
        let userId = document.getElementById("userId");
        let loginBtn = document.getElementById("loginBtn");
        let context = document.getElementById("context");

        var user = new User();

        if (sessionStorage.getItem("isLoggedIn") === "true") {
            user.upDateUserClass();
            userId.style.display = "block";
            loginBtn.style.display = "none";
            context.textContent = "Bonjour, " + user.username;
        }
        else {//to play as a guest, we create artificial data
            if (!storedUserData) {
                user.upDateUnconnectedUserClass(); // a version of upDateUserClass that works with Guest data
            }
            else {
                user.upDateUserClass(); //only load cached datas
            }
        }


        function logout() {

            fetch("./API/UpdateSaveFile.php", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ userId: user.userId, saveFileData: user.getSaveFile() })
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.status === "success") {
                        localStorage.removeItem("userData");
                        sessionStorage.setItem("isLoggedIn", "false");
                        window.location.reload();
                    }
                })
                .catch((error) => {
                    console.error("Error:", error);
                });
        }


        function viewUserInfo(id) {
            // Accédez à la page où les informations de l’utilisateur sont affichées
            window.location.href = './src/login/account.html?id=' + id;
        }
    </script>
</body>


</html>